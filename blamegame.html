<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blame Game</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f0f0f0;
            overflow: hidden; /* Prevent scroll on zoom/flash */
        }
        
        body {
            display: flex;
            flex-direction: column;
            text-align: center;
        }

        header {
            flex: 0 1 auto; /* Don't grow, shrink if needed */
            padding-top: 20px; /* Pulls it closer to the top */
        }

        main {
            flex: 1 1 auto; /* Takes up remaining space */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centers the wheel/result vertically in this space */
            align-items: center;
            width: 100%;
        }

        h1 {
            font-size: 3em;
            color: #333;
            margin-bottom: 10px;
        }
        
        h2 {
            font-size: 1.2em;
            color: #555;
            font-weight: 400;
            margin-top: 0;
            margin-bottom: 20px; /* Reduced margin */
        }

        .wheel-container {
            position: relative;
            width: 400px; /* Made larger */
            height: 400px; /* Made larger */
            cursor: pointer;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            border: 5px solid #ccc;
            
            /* This creates the 7-segment pie chart.
              Each color gets an equal ~51.4-degree slice (360 / 7).
            */
            background: conic-gradient(
                #FF6347 0deg 51.43deg,  /* Tomato */
                #4682B4 51.43deg 102.86deg, /* SteelBlue */
                #32CD32 102.86deg 154.29deg, /* LimeGreen */
                #FFD700 154.29deg 205.71deg, /* Gold */
                #FF4500 205.71deg 257.14deg, /* OrangeRed */
                #9370DB 257.14deg 308.57deg, /* MediumPurple */
                #00CED1 308.57deg 360deg  /* DarkTurquoise */
            );
        }

        .arrow {
            position: absolute;
            top: 0; /* Sits on the top edge, pointing in */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            /* This creates the triangle/arrow shape */
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 30px solid #333; /* Points DOWN into the chart */
            z-index: 10;
        }

        /* The dot in the center has been removed. */

        /* This class is added by JavaScript to make the wheel spin */
        .spinning {
            transition: transform 4s cubic-bezier(0.2, 0.8, 0.7, 1); /* Slower, easing out */
        }

        /* This div will show the result */
        .result {
            margin-top: 30px;
            font-size: 2em;
            font-weight: bold;
            color: #333;
            min-height: 1.5em; /* Prevents layout shift */
        }

        /* This animation is added when a result is chosen */
        .result.highlight {
            animation: highlight-flash 0.8s ease-out;
        }
        
        @keyframes highlight-flash {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.15); /* Pop effect */
                color: #000;
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>Blame Game</h1>
        <h2>click to spin and find out whose fault IT is</h2>
    </header>

    <main>
        <div class="wheel-container" onclick="spinWheel()">
            <div class="arrow"></div>
            <div class="wheel" id="spinWheel">
                </div>
        </div>

        <div id="result-display" class="result">Click to spin!</div>
    </main>

    <script>
        const wheel = document.getElementById('spinWheel');
        const resultDisplay = document.getElementById('result-display');
        let isSpinning = false;
        
        // The 7 segments, in order (0-~51.4deg, ~51.4-~102.8deg, etc.)
        const segments = [
            'Product Team',
            'Tier 1 Support',
            'Internet Outage',
            'Reid',
            'AWS is Down',
            'Zoom',
            'Critically Low Caffeine'
        ];

        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;

            // 1. Reset text and highlight
            resultDisplay.textContent = 'Spinning...';
            resultDisplay.classList.remove('highlight');
            
            // 2. Reset wheel spin for a new turn
            wheel.style.transition = 'none';
            const currentRotation = getComputedStyle(wheel).transform;
            // This ensures the next spin doesn't just start from 0
            if (currentRotation !== 'none') {
                wheel.style.transform = currentRotation;
            }
            
            // Force browser to apply the reset
            void wheel.offsetWidth; 

            // 3. Determine target segment randomly
            const segmentsLength = segments.length;
            const randomIndex = Math.floor(Math.random() * segmentsLength);
            const targetSegment = segments[randomIndex];

            // 4. Calculate rotation
            const degreesPerSegment = 360 / segmentsLength;
            const segmentMidpoint = degreesPerSegment / 2;
            
            // Calculate the target rotation
            let degreesToLandOn = (randomIndex * degreesPerSegment) + segmentMidpoint;
            
            // Spin backwards to align the segment under the static top arrow
            degreesToLandOn = 360 - degreesToLandOn;

            // 5. Add multiple full spins
            const fullSpins = 5; 
            const totalRotation = (fullSpins * 360) + degreesToLandOn;

            // 6. Apply the spinning transition
            wheel.style.transition = 'transform 4s cubic-bezier(0.25, 0.1, 0.25, 1.0)';
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            // 7. After animation, show the result and re-enable spinning
            wheel.addEventListener('transitionend', () => {
                isSpinning = false;
                
                // Show the winner
                resultDisplay.textContent = `It's... ${targetSegment}'s fault!`;
                resultDisplay.classList.add('highlight'); // Add flash animation
                
                // This 'resets' the wheel angle without animation
                // so the next spin starts from the new position
                const currentRotation = totalRotation % 360;
                wheel.style.transition = 'none';
                wheel.style.transform = `rotate(${currentRotation}deg)`;

            }, { once: true });
        }
    </script>
</body>
</html>
